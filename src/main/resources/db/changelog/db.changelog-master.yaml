databaseChangeLog:
- changeSet:
    id: Create entity Reports
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: reports_pkey
            name: reportid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: content
            type: VARCHAR(1903247980)
        - column:
            constraints:
              constraints:
                nullable: false
            name: startdate
            type: DATE
        - column:
            constraints:
              constraints:
                nullable: false
            name: enddate
            type: DATE
        tableName: reports

- changeSet:
    id: Create entity Weights
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: weights_pkey
            name: weightid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: value
            type: DECIMAL(6,2)
        - column:
            constraints:
              constraints:
                nullable: false
            name: measurementdate
            type: DATE
        tableName: weights

- changeSet:
    id: Create entity Cycles
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: cycles_pkey
            name: cycleid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: startdate
            type: DATE
        - column:
            constraints:
              constraints:
                nullable: true
            name: enddate
            type: DATE
        tableName: cycles

- changeSet:
    id: Create entity Sets
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: sets_pkey
            name: setid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: setname
            type: VARCHAR(200)
        - column:
            constraints:
              constraints:
                nullable: false
            name: cycleid
            type: BIGINT
        tableName: sets

- changeSet:
    id: Create entity Trainings
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: trainings_pkey
            name: trainingid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: setid
            type: BIGINT
        - column:
            constraints:
              constraints:
                nullable: false
            name: trainingdate
            type: DATE
        tableName: trainings

- changeSet:
    id: Create entity Exercise
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: exercises_pkey
            name: exerciseid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: setid
            type: BIGINT
        - column:
            constraints:
              constraints:
                nullable: false
            name: exercisename
            type: VARCHAR(100)
        tableName: exercises

- changeSet:
    id: Create entity Exercise Session
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: exercisesessions_pkey
            name: exercisesessionid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: exerciseid
            type: BIGINT
        tableName: exercisesessions

- changeSet:
    id: Create entity Series
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: series_pkey
            name: seriesid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: exercisesessionid
            type: BIGINT
        - column:
            constraints:
              constraints:
                nullable: false
            name: weight
            type: DECIMAL(6,2)
        - column:
            constraints:
              constraints:
                nullable: false
            name: repeats
            type: BIGINT
        - column:
            name: comment
            type: VARCHAR(250)
        tableName: series

- changeSet:
    id: Create entity Products
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: products_pkey
            name: productid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: productname
            type: VARCHAR(200)
        - column:
            constraints:
              constraints:
                nullable: false
            name: screenurl
            type: VARCHAR(1903247980)
        tableName: products

- changeSet:
    id: Create entity Prices
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: prices_pkey
            name: priceid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: productid
            type: BIGINT
        - column:
            constraints:
              constraints:
                nullable: false
            name: pricedate
            type: DATE
        - column:
            constraints:
              constraints:
                nullable: false
            name: value
            type: DECIMAL(6,2)
        - column:
            constraints:
              constraints:
                nullable: false
            name: place
            type: VARCHAR(100)
        - column:
            name: quantity
            type: DECIMAL(6,2)
        tableName: prices

- changeSet:
    id: Unique for productname
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: productname
        constraintName: uk_products_productname
        tableName: products

- changeSet:
    id: Unique for cycleid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: cycleid
        constraintName: uk_cycles_cycleid
        tableName: cycles
    dbms: PostgreSQL

- changeSet:
    id: Unique for setid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: setid
        constraintName: uk_sets_setid
        tableName: sets
    dbms: PostgreSQL
    
- changeSet:
    id: Unique for trainingid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: trainingid
        constraintName: uk_trainings_trainingid
        tableName: trainings
    dbms: PostgreSQL
    
- changeSet:
    id: Unique for exerciseid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: exerciseid
        constraintName: uk_exercises_exerciseid
        tableName: exercises
    dbms: PostgreSQL

- changeSet:
    id: Unique for exercisesessionid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: exercisesessionid
        constraintName: uk_exercisesessions_exercisesessionid
        tableName: exercisesessions
    dbms: PostgreSQL
    
- changeSet:
    id: Unique for seriesid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: seriesid
        constraintName: uk_series_seriesid
        tableName: seriess
    dbms: PostgreSQL
    
- changeSet:
    id: Unique for priceid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: priceid
        constraintName: uk_prices_priceid
        tableName: prices
    dbms: PostgreSQL
    
- changeSet:
    id: Unique for productid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: productid
        constraintName: uk_products_productid
        tableName: products
    dbms: PostgreSQL

- changeSet:
    id: Unique for reportid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: reportid
        constraintName: uk_reports_reportid
        tableName: reports
    dbms: PostgreSQL
    
- changeSet:
    id: Unique for weightid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: weightid
        constraintName: uk_weights_weightid
        tableName: weights
    dbms: PostgreSQL

- changeSet:
    id: Relation Sets - Cycles
    author: Artur Czopek
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: cycleid
        baseTableName: sets
        constraintName: fk_sets_cycles
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: cycleid
        referencedTableName: cycles

- changeSet:
    id: Relation Trainings - Sets
    author: Artur Czopek
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: setid
        baseTableName: trainings
        constraintName: fk_trainings_sets
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: setid
        referencedTableName: sets

- changeSet:
    id: Relation Exercises - Sets
    author: Artur Czopek
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: setid
        baseTableName: exercises
        constraintName: fk_exercises_sets
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: setid
        referencedTableName: sets

- changeSet:
    id: Relation Exercise sessions - Exercises
    author: Artur Czopek
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: exerciseid
        baseTableName: exercisesessions
        constraintName: fk_exercisesessions_exercises
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: exerciseid
        referencedTableName: exercises

- changeSet:
    id: Relation Series - Exercise sessions
    author: Artur Czopek
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: exercisesessionid
        baseTableName: series
        constraintName: fk_series_exercisesessions
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: exercisesessionid
        referencedTableName: exercisesessions

- changeSet:
    id: Relation Prices - Products
    author: Artur Czopek
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: productid
        baseTableName: prices
        constraintName: fk_prices_productss
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: productid
        referencedTableName: products

- changeSet:
    id: Default value product photo
    author: Artur Czopek
    changes:
    - addDefaultValue:
        coulmnDataType: VARCHAR(200)
        columnName: screenUrl
        defaultValue: NO_PRODUCT_PHOTO.JPG
        tableName: Products

- changeSet:
    id: Create entity Language
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: language_pkey
            name: languageid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: shortname
            type: VARCHAR(3)
        - column:
            constraints:
              constraints:
                nullable: false
            name: fullname
            type: VARCHAR(20)
        tableName: languages

- changeSet:
    id: Create entity Dictionary
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: dictionaries_pkey
            name: dictionaryentryid
            type: BIGSERIAL
        - column:
            constraints:
              constraints:
                nullable: false
            name: key
            type: VARCHAR(60)
        - column:
            constraints:
              constraints:
                nullable: false
            name: value
            type: VARCHAR(60)
        - column:
            constraints:
              constraints:
                nullable: false
            name: languageid
            type: BIGINT
        tableName: dictionaries

- changeSet:
    id: Unique for languageid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: languageid
        constraintName: uk_languages_languageid
        tableName: languages
    dbms: PostgreSQL

- changeSet:
    id: Unique for dictionaryentryid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: dictionaryentryid
        constraintName: uk_dictionaries_dictionaryentryid
        tableName: dictionaries
    dbms: PostgreSQL

- changeSet:
    id: Relation Dictionary - Language
    author: Artur Czopek
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: languageid
        baseTableName: dictionaries
        constraintName: fk_dictionaries_languages
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: languageid
        referencedTableName: languages

- changeSet:
    id: Create entity User Setting
    author: Artur Czopek
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              primaryKey: true
              primaryKeyName: usersettings_pkey
            name: userid
            type: BIGSERIAL
        - column:
            name: infomail
            type: VARCHAR(100)
        - column:
            constraints:
              constraints:
                nullable: false
            name: languageid
            type: BIGINT
        tableName: usersettings

- changeSet:
    id: Unique for userid
    author: Artur Czopek
    changes:
    - addUniqueConstraint:
        columnNames: userid
        constraintName: uk_usersettings_userid
        tableName: usersettings
    dbms: PostgreSQL

- changeSet:
    id: Relation User Setting - Language
    author: Artur Czopek
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: languageid
        baseTableName: usersettings
        constraintName: fk_usersettingss_languages
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: languageid
        referencedTableName: languages

- include:
    file: classpath:/db/changelog/db.changelog-dictionary.xml